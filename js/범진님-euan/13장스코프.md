13장 스코프
----
---------
13.3.1 스코프란?
----------
scope란 유효범위로 예제에서

```js
function add(x,y){
    console.log(x,y);//2,5
return x+y;
}
add(2,5);
console.log(x,y);//ReferenceError:x is not defined
```
위 예제에서 함수의 매개변수는 함수 몸체내부에서만 참조할 수 있다.
```js
var var1=1;
if(true){
    var var2=2;
    if(true){
        var var3=3;
    }
}
function foo(){
    var var4=4;
function bar(){
    var var5=5;
}
}

console.log(var1);//1
console.log(var2);//2
console.log(var3);//3
console.log(var4);//ReferenceError var4 is not defined
console.log(var5);//ReferenceError var5 is not defined
```
즉 스코프는 식별자가 유효한 범위를 말한다.

```js
var x='global';
function foo(){
    var x='local';
    console.log(x);//<1>
}
foo();
console.log(x);//<2>
```
js엔진은 scope를 통해 어떤  변수를 참조할지 결정한다.
코드가 어디서 실행되며 주변에 어떤코드가 있는지를 렉시컬 환경이라고 한다.이를 구현한는 것이 실행 컨텍스트이고 모든 코드는 실행 컨텍스트에서 평가되고 실행된다.(23장에서 자세히 알아보자)

위 예제에서 x들은 다른 변수이다.
전역스코프:global
foo함수 스코프:local

식별자는 어떤 값을 구별할 수 있어야 하므로 유일해야한다.따라서 식별자인 변수이름은 중복될수 없다.
즉 하나의 값은 유일한 식별자에 연결되어야 한다.

ex)파일 이름은 하나의 파일을 구별하여 식별할 수 있는 식별자이다.우리가 이름을 중복할 수 있는 이유는 디렉토리라는 개념때문이다.

13.2스코프의 종류
--------------
----------
코드는 1.전역2.지역으로 나누어 진다.

13.2.1전역과 지역 스코프
--------
전역변수는 어디서든지 참조를 할 수 있다.


13.2.2지역과 지역스코프
------
지역이란 함수 몸체 내부를 말한다.
지역변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.

13.3 스코프 체인
----------
스코프가 함수의 중첩에 의해 계층적 구조를 갖는다.
스코프가 계층적으로 연결된 것을 스코프 체인이라고 한다.

변수를 참조할 때 js엔진은 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 상위스코프 방향으로 이동하며 선언된 변수를 검색이라고 한다.
(자세한것은 23장 실행 컨텍스트에서 알아보자)



13.3.1 스코프 체인에 의한 변수 검색
---------
상위스코프에서 유효한 변수는 하위스코프에서 자유롭게 참조할 수 있지만  하위 스코프에서 유효한 변수를 상위스코프에서 참조할 수 없다는 것을 의미한다.

13.3.2스코프 체인에 의한 함수 검색
---------

```js
function foo(){
    console.log('global function foo')
}
function bar(){
    function foo(){
console.log('local function foo')
    }
    foo();//<1>
}
bar();
``` 
<1>에서 foo함수를 호출하면 js엔진에서 식별자 foo를 검색한다.

13.4 함수레벨 스코프
------
--------
var키워드로 선언된 변수는 코드블록이 아닌 함수에 의해서만 지역 스코프가 생성된다는 의미이다.

```js
var x=1;
if(true){
    var x=10;//var x는 전역변수이다.
}
console.log(x);//10
```

또 다른 예시
```js
var i=10;
for(var i=0;i<5;i++){
    console.log(i);//0 1 2 3 4
}
console.log(i);//5
```


13.5 랙시컬 스코프
-----
-------

```js
var x=1;
function foo(){
    var x=10;
    bar();
}
function bar(){
    console.log(x);
}
foo();//1
bar();//1
```
위 예시에서 실행결과를 예측해보자

1.함수를 어디서 호출했는지에 따라 함수의 상위 스코프를 결정한다.

2.함수를 어디서 정의했는지에 따라 함수의 상위 스코프를 결정한다.

첫번쨰 방식을 동적 스코프라고 한다.
함수를 정의하는 시점에 함수가 어디서 호 출되는지 알수 없다.함수가 호출되는 시점으로부터 상위함수를 정해야 되기 떄문에 동적 스코프라고 한다.

두번재 방식을 랙시컬 스코프 또는 정적 스코프라고 한다.
렉시컬 스코프는 클로저와 깊은 관련이 있고 이에 대해서는 24장때 알아보자.

